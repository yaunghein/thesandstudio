<script lang="ts">
  import { onMount } from "svelte";
  import gsap from "gsap";

  onMount(() => {
    // document.body.style.cursor = "none";

    const animateLogo = (e: MouseEvent) => {
      const rect = document.querySelector("#logo")!.getBoundingClientRect();
      const track = {
        x: e.clientX / (rect!.left + rect!.width / 2) - 1,
        y: e.clientY / (rect!.top + rect!.height / 2) - 1,
      };

      const outerShapes = document.querySelectorAll(
        ".logo-outer-shape",
      ) as NodeListOf<HTMLElement>;
      outerShapes.forEach((shape) => {
        gsap.to(shape, {
          rotate: `${+track.x * 100}deg`,
          transformOrigin: "center",
        });
        // shape!.style.transform = `rotate(${+track.x * 100}deg)`
      });

      const mouthShapes = document.querySelectorAll(
        ".logo-mouth",
      ) as NodeListOf<HTMLElement>;
      mouthShapes.forEach((shape) => {
        shape!.style.transform = `rotate(${+track.x * 10}deg)`;
        // gsap.to(shape, {
        //   rotate: `${+track.x * 10}deg`,
        //   transformOrigin: "center",
        // });
        // gsap.to(shape, {
        //   rotate: `${+track.x * 10}deg`,
        //   transformOrigin: "center center",
        // });
      });

      const eyesShapes = document.querySelectorAll(
        ".logo-eyes",
      ) as NodeListOf<HTMLElement>;
      eyesShapes.forEach((shape) => {
        // shape!.style.transform = `translate(${+track.x * 2}px, ${
        //   +track.y * 2
        // }px)`;
        gsap.to(shape, {
          x: `${+track.x * 2}deg`,
          y: `${+track.y * 2}deg`,
        });
      });
    };

    window.addEventListener("mousemove", (e) => animateLogo(e));
    return () => window.removeEventListener("mousemove", (e) => animateLogo(e));
  });
</script>

<svg
  id="logo"
  width="100%"
  height="100%"
  viewBox="0 0 101 101"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <g clip-path="url(#clip0_30_205)">
    <path
      class="logo-outer-shape origin-center"
      d="M50.5 99.3043L46.9732 85.2131C45.7572 80.3572 39.6788 78.7278 36.1988 82.3257L26.0978 92.7658L30.0898 78.7988C31.4657 73.9865 27.0151 69.536 22.2028 70.9118L8.23585 74.9038L18.6759 64.8028C22.2739 61.3228 20.6445 55.2444 15.7886 54.0284L1.69727 50.5016L15.7886 46.9747C20.6445 45.7587 22.2739 39.6804 18.6759 36.2003L8.23585 26.0994L22.2028 30.0913C27.0151 31.4672 31.4657 27.0166 30.0898 22.2043L26.0978 8.23737L36.1988 18.6775C39.6788 22.2754 45.7572 20.646 46.9732 15.7901L50.5 1.69879L54.0269 15.7901C55.2429 20.646 61.3212 22.2754 64.8013 18.6775L74.9022 8.23737L70.9103 22.2043C69.5344 27.0166 73.985 31.4672 78.7973 30.0913L92.7642 26.0994L82.3242 36.2003C78.7262 39.6804 80.3556 45.7587 85.2115 46.9747L99.3028 50.5016L85.2115 54.0284C80.3556 55.2444 78.7262 61.3228 82.3242 64.8028L92.7642 74.9038L78.7973 70.9118C73.985 69.536 69.5344 73.9865 70.9103 78.7988L74.9022 92.7658L64.8013 82.3257C61.3212 78.7278 55.2429 80.3572 54.0269 85.2131L50.5 99.3043Z"
      fill="black"
    />
    <path
      class="logo-outer-shape origin-center"
      d="M50.5 101C49.7217 101 49.0434 100.47 48.8545 99.7162L45.3276 85.6249C44.9094 83.9503 43.6627 82.6842 41.9962 82.2369C40.328 81.7896 38.6179 82.2643 37.4164 83.5046L27.3154 93.9446C26.7745 94.5034 25.9234 94.6229 25.2484 94.2337C24.575 93.8445 24.252 93.0468 24.4652 92.2991L28.4571 78.3322C28.9319 76.6721 28.4862 74.9539 27.2654 73.733C26.0445 72.5122 24.3263 72.0665 22.6662 72.5413L8.69929 76.5332C7.95161 76.7464 7.15387 76.425 6.76469 75.75C6.37551 75.0766 6.49501 74.2239 7.05375 73.683L17.4938 63.582C18.7341 62.3822 19.2088 60.6704 18.7615 59.0022C18.3142 57.3357 17.0481 56.089 15.3735 55.6708L1.28223 52.1439C0.528088 51.955 -0.00158691 51.2767 -0.00158691 50.4984C-0.00158691 49.72 0.528088 49.0418 1.28223 48.8528L15.3735 45.326C17.0481 44.9061 18.3142 43.661 18.7615 41.9945C19.2088 40.328 18.7341 38.6162 17.4938 37.4148L7.05375 27.3138C6.49501 26.7728 6.37551 25.9218 6.76469 25.2468C7.15387 24.5734 7.95 24.2504 8.69929 24.4636L22.6662 28.4555C24.3263 28.9303 26.0445 28.4846 27.2654 27.2637C28.4862 26.0429 28.9319 24.3231 28.4571 22.6646L24.4652 8.69765C24.252 7.94997 24.5734 7.15222 25.2484 6.76304C25.9218 6.37386 26.7745 6.49336 27.3154 7.0521L37.4164 17.4922C38.6162 18.7324 40.328 19.2072 41.9962 18.7599C43.6627 18.3125 44.9094 17.0465 45.3276 15.3719L48.8545 1.28058C49.0434 0.52644 49.7217 -0.00323486 50.5 -0.00323486C51.2784 -0.00323486 51.9566 0.52644 52.1456 1.28058L55.6724 15.3719C56.0923 17.0465 57.3374 18.3125 59.0039 18.7599C60.6704 19.2072 62.3838 18.7324 63.5836 17.4922L73.6846 7.0521C74.2256 6.49336 75.0782 6.37386 75.7516 6.76304C76.425 7.15222 76.748 7.94997 76.5348 8.69765L72.5429 22.6646C72.0681 24.3247 72.5138 26.0429 73.7347 27.2637C74.9555 28.4846 76.6753 28.9287 78.3338 28.4555L92.3008 24.4636C93.0484 24.2504 93.8462 24.5718 94.2354 25.2468C94.6245 25.9202 94.505 26.7728 93.9463 27.3138L83.5062 37.4148C82.266 38.6146 81.7912 40.3264 82.2385 41.9945C82.6859 43.661 83.9519 44.9077 85.6265 45.326L99.7178 48.8528C100.472 49.0418 101.002 49.72 101.002 50.4984C101.002 51.2767 100.472 51.955 99.7178 52.1439L85.6265 55.6708C83.9519 56.0906 82.6859 57.3357 82.2385 59.0022C81.7912 60.6688 82.266 62.3805 83.5062 63.582L93.9463 73.683C94.505 74.2239 94.6245 75.075 94.2354 75.75C93.8462 76.425 93.05 76.7464 92.3008 76.5332L78.3338 72.5413C76.6737 72.0665 74.9539 72.5122 73.7347 73.733C72.5154 74.9539 72.0681 76.6721 72.5429 78.3322L76.5348 92.2991C76.748 93.0468 76.4267 93.8445 75.7516 94.2337C75.0782 94.6229 74.2256 94.5034 73.6846 93.9446L63.5836 83.5046C62.3838 82.2643 60.672 81.7896 59.0039 82.2369C57.3374 82.6842 56.0907 83.9503 55.6724 85.6249L52.1456 99.7162C51.9566 100.47 51.2784 101 50.5 101ZM40.7382 78.6777C41.4455 78.6777 42.1625 78.7714 42.8746 78.9619C45.7491 79.7322 47.8953 81.9155 48.6187 84.8013L50.5016 92.3217L52.3846 84.8013C53.1064 81.9155 55.2542 79.7322 58.1286 78.9619C61.0031 78.1917 63.9534 79.0088 66.0221 81.1469L71.4125 86.7181L69.2825 79.2639C68.4654 76.4024 69.2324 73.4391 71.3366 71.3349C73.4408 69.2308 76.4057 68.4621 79.2656 69.2808L86.7198 71.4109L81.1485 66.0204C79.0104 63.9518 78.1933 60.9998 78.9636 58.127C79.7339 55.2525 81.9172 53.1048 84.8029 52.3829L92.3234 50.5L84.8029 48.6171C81.9172 47.8952 79.7339 45.7474 78.9636 42.873C78.1933 39.9985 79.0104 37.0482 81.1485 34.9795L86.7198 29.5891L79.2656 31.7191C76.404 32.5363 73.4408 31.7692 71.3366 29.665C69.2324 27.5609 68.4638 24.596 69.2825 21.7361L71.4125 14.2818L66.0221 19.8531C63.9534 21.9912 61.0015 22.8083 58.1286 22.038C55.2542 21.2677 53.1064 19.0844 52.3846 16.1987L50.5016 8.67827L48.6187 16.1987C47.8969 19.0844 45.7491 21.2677 42.8746 22.038C40.0002 22.8083 37.0498 21.9912 34.9812 19.8531L29.5908 14.2818L31.7208 21.7361C32.5379 24.5976 31.7708 27.5609 29.6667 29.665C27.5625 31.7692 24.5992 32.5379 21.7377 31.7191L14.2835 29.5891L19.8548 34.9795C21.9928 37.0482 22.81 40.0001 22.0397 42.873C21.2694 45.7458 19.0861 47.8936 16.2003 48.6171L8.67992 50.5L16.2003 52.3829C19.0877 53.1048 21.2694 55.2525 22.0397 58.127C22.81 61.0014 21.9928 63.9518 19.8548 66.0204L14.2835 71.4109L21.7377 69.2808C24.5992 68.4637 27.5625 69.2308 29.6667 71.3349C31.7708 73.4391 32.5395 76.4024 31.7208 79.2639L29.5908 86.7181L34.9812 81.1469C36.5379 79.5385 38.5936 78.6777 40.7398 78.6777H40.7382Z"
      fill="black"
    />
    <path
      class="logo-eyes"
      d="M43.8113 41.9977C43.8113 40.8528 44.7398 39.9258 45.8832 39.9258C47.0265 39.9258 47.955 40.8528 47.955 41.9977V48.4281C47.955 49.573 47.0265 50.5 45.8832 50.5C44.7398 50.5 43.8113 49.573 43.8113 48.4281V41.9977ZM52.8836 48.4281C52.8836 49.573 53.8121 50.5 54.9555 50.5C56.0988 50.5 57.0273 49.573 57.0273 48.4281V41.9977C57.0273 40.8528 56.1004 39.9258 54.9555 39.9258C53.8105 39.9258 52.8836 40.8528 52.8836 41.9977V48.4281Z"
      fill="white"
    />
    <path
      class="logo-mouth origin-center"
      d="M50.4371 72.3281C49.1904 72.3297 47.968 72.2247 46.7778 72.0213C36.5896 70.2869 28.8044 61.3987 28.7947 50.7228C28.7947 49.5795 29.7216 48.651 30.8649 48.6494C32.0083 48.6494 32.9384 49.5747 32.9384 50.718C32.9449 59.3494 39.2396 66.5324 47.4754 67.9357C48.4379 68.0988 49.4246 68.1844 50.4322 68.1844C60.0713 68.1763 67.9067 60.3281 67.8986 50.6889C67.8986 49.5456 68.8239 48.6154 69.9688 48.6154C71.1122 48.6154 72.0407 49.5424 72.0423 50.6857C72.052 62.6099 62.3596 72.3184 50.4371 72.3281Z"
      fill="white"
    />
  </g>
  <defs>
    <clipPath id="clip0_30_205">
      <rect width="101" height="101" fill="white" />
    </clipPath>
  </defs>
</svg>
